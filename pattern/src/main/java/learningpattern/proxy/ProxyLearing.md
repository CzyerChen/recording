> 代理我们熟知的设计模式，除了设计模式，也有网络技术中的代理

### 一、代理的分类
动态代理、代理模式、正向代理、反向代理

### 二、正向代理、反向代理
在计算机网络层面，代理技术主要有：正向代理、反向代理、透明代理，最常见的就是正向代理和反向代理

#### 1、正向代理：
是一个位于客户端和目标服务器之间的服务器（代理服务器），为了目标服务器取得内容，客户端向代理服务器发送一个请求并指定目标，然后代理服务器想目标服务器转交请求并将获得的内容返回给客户端。一般没有说明，代理技术默认正向代理技术
```text

|--------|                      |----------|                      |----------|
|   PC   | ----------------->   | 代理服务器| ------------------>  | WEB服务器 |
|--------|                      |----------|                      |----------|

```
> 1. PC无法直接访问WEB服务器，代理可以访问
> 2. 代理服务器帮助PC请求目标服务器，并将缓存保留在本地，并将页面返回给PC

- 正向代理的用途
1. 突破访问限制：VPN技术-是正向代理技术的一种实践，翻墙上网
2. 提高访问速度：可以在代理服务器设置缓存，然后大量请求就可以被快速的转发
3. 隐藏客户真实IP

#### 2、反向代理：
是指以代理服务器来接受Internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给Internet上请求连接的客户端，此时代理服务器对外就是一个反向代理服务器

- 反向代理的用途
1. 隐藏服务器真实IP：使用反向代理，对客户端隐藏服务器的IP
2. 负载均衡：根据所有真实服务器的负载情况，将客户端的请求分发到不同的服务器上处理
3. 提高访问速度：对于静态内容做缓存，对短时间多次访问的动态内容做缓存
4. 提供安全保障：可以作为应用防火墙，应对基于Web的攻击行为，更容易排查恶意软件。还可以为后端提供一套SSL加速或加密，提供HTTP访问认证

```text

|--------|                      |----------|                      |-----------------|
|   PC   | ----------------->   | 代理服务器| ------------------>  | WEB服务器（隐藏） |
|--------|                      |----------|                      |-----------------|

```
> 1.PC访问WEB服务，并不知道访问的是代理服务器，PC以为代理服务器就是WEB服务器
> 2.代理服务器将WEB服务器的页面缓存到本地，当PC访问的时候直接反馈给PC页面

#### 3、正向代理和反向代理的区别
正向代理的目标服务器不知道任何一个访问的客户端；反向代理每一个客户端不知道任何一个访问的Web服务区

### 三、静态代理、动态代理
静态代理和动态代理主要是应用再Spring AOP中比较明显的使用，主要在于对象的产生是程序自动产生还是代码手动生成。静态代理和动态代理的主要区别在于代理类创建的时间不同。

> 代理模式：给某一个对象提供一个代理，并由代理对象控制对原对象的引用

#### 1、静态代理类：
由编码实现，在编译和运行之前需要确定

#### 2、动态代理类：
JDK动态代理或者CGLIB动态代理，都是在程序运行期动态生成，不需要在编译器确定，通过反射机制根据类名获取class文件，并生成实例对象
- JDK动态代理通过接口的方式，一定需要接口、接口实现类，有些局限
- CGLIB动态代理是依靠底层字节码技术，通过继承关系，拦截子类实现相关操作来实现代理

#### 3、区别：
静态代理只生成一个手动创建的类，而动态代理只要遵循规范，能够根据接口实现和继承关系生成多个实现类

#### 4、静态代理的用途：
1. 控制真实对象访问权限
2. 避免创建大对象
3. 增强真实对象的功能

#### 5、 动态代理的用途：
主要用于框架底层，动态生成代理类，实现AOP 、拦截器、过滤器，例如servlet filter\spring aop \struct2 拦截器、mybatis分页、日志拦截、事务拦截、权限拦截











