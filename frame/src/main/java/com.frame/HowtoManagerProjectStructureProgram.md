### 一、什么是架构
软件架构是软件的软件的基本结构

### 二、为什么需要架构
- 合适的架构是软件成功的重要因素之一
- 对目标系统按照指定原则进行划分，使不同角色能够独立（共同）按照规划的流水线并行（串行）工作

### 三、架构的细分
- 架构可以细分为业务架构（战略）、应用架构（战术）、技术架构（装备）
- 以上三种架构都有一定程度的重叠，功能架构既属于业务架构又属于应用架构，系统架构和技术架构是类似的意思
- 业务逻辑架构：包含业务流程、工作流程、产品管理、企业数据、IT基础资产设施、功能架构
  - 总体就是做业务拆分，只要把不同的功能实体操作划分清楚即可，无需提及技术、并发、硬件的思考
- 应用架构（软件架构）：逻辑架构，开发架构（分层、事件驱动、微核、云、微服务），运行架构，物理架构，数据架构，安全架构
  - 指出系统的层次、系统开发的原则、系统各个层次的应用服务
  - 数据架构，需要讨论对数据存储的架构方法论，包含各个系统应用场景、不同时间段的应用场景对数据进行诸如数据异构、读写分离、数据库或NOSQL的策略、缓存的使用、分布式数据（数据库）策略等
  - 代表类型有：单体式、分布式、SOA架构
  - 单体架构：传统的项目方式，将所有编码和请求都落实到一个应用，大而全，一站式开发调试部署，但是这样的项目代码量巨大，难以维护，无法水平扩展
  - 分布式架构：相互独立，代码独立开发，独立部署，通过API接口互相通信。通讯协议一般使用HTTP。应用松散耦合、独立开发测试，API接口需求变化，应用就需要重新部署，通信可靠性和数据的封装性相对于进程内调用比较差
  - SOA架构（云架构）：是分布式架构的一种，提供配套的服务治理，包括服务注册、服务路由、服务授权、服务降级、服务监控等，是当下热门的架构方式，容易做自动化测试和部署，服务是无状态的，很容易做水平扩展；通过容器虚拟化技术，实现故障隔离和资源高效利用，但是分布式数据一致性和分布式事务支持难度大
  - 可以垂直拆分成子系统，也可以水平拆分各项功能
- 技术架构（基础架构）：传统架构（系统架构、网络架构），分布式架构


### 四、开发架构
#### 1.分层架构
1. 表现层（presentation）：用户展示界面，负责视觉和用户互动；
2. 应用层（business）：实现业务逻辑，明确提供哪些主要的业务功能；
3. 持久层（persistence）：提供数据，与数据库交互；
4. 数据库（database） ：保存数据，实现数据持久化；
有时在应用层和持久层之间，加了一个服务层（service），提供不同业务逻辑需要的一些通用接口。

#### 2.事件驱动架构
1. 事件队列（event queue）：接收事件的入口，以队列的方式存储事件消息；
2. 事件分发器（event mediator）：将不同的事件消息分发到不同的业务逻辑单元中；
3. 事件通道（event channel）：是分发器与处理器之间的联系渠道；
4. 事件处理器（event processor）：实现业务处理逻辑，处理完成后发出事件，触发下一步操作；

#### 3.微核架构
- 内核（core）通常包含系统运行的最小功能模块；
- 插件互相独立，插件之间的通信，应该减少到最低，避免出现互相依赖的问题；

#### 4.微服务架构
- 微服务架构（microservices architecture）是服务导向架构（service-oriented architecture，缩写 SOA）的升级，变化为以小功能模块为子交互模块，实现模块间的松散耦合
- 微服务架构分成三种实现模式：
    - RESTful API 模式(云服务)：服务通过 API 对外提供；
    - RESTful 应用模式：服务通过传统的网络协议或者应用协议，向外提供一个多功能的应用程序，常见于企业内部；
    - 集中消息模式：采用消息代理（message broker），实现消息队列、负载均衡、统一日志和异常处理等功能。可能出现单点故障，因而消息代理服务也需要做成集群；

#### 5.云架构
- 两个组成部分：处理单元（processing unit），虚拟中间件（virtualized middleware）；
- 处理单元：实现业务逻辑的部分；
- 虚拟中间件： 负责通信、保持session信息、数据复制同步、数据缓存、分布式处理、处理单元的部署；
- 虚拟中间件包括四个组件：
    - 1.消息中间件（MG）：主要负责管理用户请求和session，将对应请求路由到不同处理单元
    - 2.处理中间件(PG)：主要负责协调处理单元
    - 3.部署中间件(DM)：主要负责控制可监控处理单元，包括启动关闭、负载均衡、响应时间监控
    - 4.数据中间件(DG)：主要负责数据的复制流转，接收到数据后，将数据同步复制到对应的处理单元，需要保证数据的一致性；