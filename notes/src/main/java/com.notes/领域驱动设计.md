- 领域设计比较涉及概念性，需要顶层设计的需要好好熟悉这些概念，而需要普通编码的也需要有一个大致的了解
- 面对混乱的代码，面对需求的无限变更，基于面向对象思想的领域驱动设计方法是一个很好的解决方法
- 系统设计的顶层建筑是对整个软件有极大影响的
- 本文向系统设计师取经，参考互联网文章：http://www.blogjava.net/johnnylzb/archive/2010/05/15/321057.html
- 借鉴引文例子，看需求变更下的系统设计：
```text
假设现在有一个银行支付系统项目，其中的一个重要的业务用例是账户转账业务。系统使用迭代的方式进行开发，在1.0版本中，该用例的功能需求非常简单，事件流描述如下：

主事件流：

1）  用户登录银行的在线支付系统

2）  选择用户在该银行注册的网上银行账户

3）  选择需要转账的目标账户，输入转账金额，申请转账

4）  银行系统检查转出账户的金额是否足够

5）  从转出账户中扣除转出金额（debit），更新转出账户的余额

6）  把转出金额加入到转入账户中（credit），更新转入账户的余额

备选事件流：

4a）如果转出账户中的余额不足，转账失败，返回错误信息
```
- 以下类规范设计请参考`类命名规范``

### 1. 面向过程的设计及方式（贫血模式）
- 以上需求的大体设计
```text
1）设计一个账户交易服务接口AccountingService，设计一个服务方法transfer()，并提供一个具体实现类AccountingServiceImpl，所有账户交易业务的业务逻辑都置于该服务类中。
2）提供一个AccountInfo和一个Account，前者是一个用于与展示层交换账户数据的账户数据传输对象，后者是一个账户实体（相当于一个EntityBean），这两个对象都是普通的JavaBean，具有相关属性和简单的get/set方法。
```

记录几次需求的变更：
- 需求变更1：需要为账户转账业务增加如下功能，在转账时，首先需要判断账户是否可用，然后，账户的余额还要分成两部分：冻结部分和活跃部分，处于冻结部分的金额不能用于任何交易业务
- 需求变更2：需要在每次交易成功后，创建一个交易明细账，于是，我们又必须在transfer()方面里面增加创建并持久化交易明细账的业务逻辑
- 需求变更3：账户每笔转账的最大额度需要由其信用指数确定、需要根据银行的手续费策略计算并扣除一定的手续费用


- 以上方法会使整体的转帐业务流程变得非常臃肿，包含太多需要考虑的部分，即使拆分子功能，在后期扩展调用的时候仍会出现很多问题
- 这个时候就需要将业务长久考虑，将支付相关的操作抽离转帐的主逻辑，将它们抽象为公共服务，实现基于领域驱动设计的理念

### 2.面向过程的领域驱动设计方式（充血模型）
- 领域模型：用户账号，账户交易明细，账户信用等级，银行交易手续费计算器

- 面向领域设计优点：
    - 业务逻辑被合理的分散到不同的领域对象中，代码结构更加清晰，可读性，可维护性更高。
    - 对象职责更加单一，内聚度更高。
    - 复杂的业务模型可以通过领域建模（UML是一种主要方式）清晰的表达，开发人员甚至可以在不读源码的情况下就能了解业务和系统结构，这有利于对现存的系统进行维护和迭代开发。
    - 系统高度模块化，代码重用度高，不会出现太多的重复逻辑